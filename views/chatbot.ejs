<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="stylesheet" href="/style.css">
  <title>Healthcare Chatbot</title>
</head>
<body>
  <div class="container"> 
    <!-- Left Panel: User Info and Appointments -->
    <div class="left-panel">

      <div class="appointments-section">
        <h2>Booked Appointments</h2>
        <div class="appointment-filters">
          <button class="filter-button" onclick="filterAppointments('upcoming')">Upcoming</button>
          <button class="filter-button" onclick="filterAppointments('past')">Past</button>
          <button class="filter-button" onclick="filterAppointments('all')">All</button>
        </div>
        <ul class="appointments-list" id="appointments-list">
          <% if (appointments.length > 0) { %>
            <% appointments.forEach(appointment => { %>
              <li class="appointment-item <%= appointment.type %>">
                <strong>Doctor:</strong> <%= appointment.doctor %><br>
                <strong>Date:</strong> <%= appointment.date %><br>
                <strong>Time:</strong> <%= appointment.time %>
              </li>
            <% }); %>
          <% } else { %>
            <p>No appointments booked yet.</p>
          <% } %>
        </ul>
      </div>

      <div class="user-info">
        <h2>User Info</h2>
        <p><strong>Name:</strong> <%= user.name %></p>
        <p><strong>Email:</strong> <%= user.email %></p>
        <div class="buttons-container">
          <button id="edit-profile" class="primary-button">Edit Profile</button>
          <form action="/logout" method="POST" class="logout-form">
            <button class="secondary-button">Logout</button>
          </form>
        </div>
      </div>
    </div>

    <!-- Right Panel: Chat Interface -->
    <div class="right-panel">
      <header class="chat-header">
        <h2>Healthcare Chatbot</h2>
      </header>

      <div class="chat-output" id="chat-output">
        <% chatMessages.forEach(message => { %>
          <div class="chat-message <%= message.sender %>">
            <%= message.text %>
          </div>
        <% }); %>
      </div>

      <!-- Book Appointment Form (Initially Hidden) -->
  <div id="appointment-form" class="appointment-form" style="display: none;">
    <h3>Book an Appointment</h3>
    <form action="/book-appointment" method="POST">
      <label for="specialization">Select Specialization:</label>
      <select id="specialization" name="specialization" required>
        <% specializations.forEach(specialization => { %>
          <option value="<%= specialization %>"><%= specialization %></option>
        <% }); %>
      </select>

      <label for="appointment-date">Select Date:</label>
      <input type="date" id="appointment-date" name="date" required>

      <label for="appointment-time">Select Time:</label>
      <input type="time" id="appointment-time" name="time" required>

      <button class="primary-button" type="submit">Book Appointment</button>
    </form>
  </div>

      <div class="chat-quick-replies">
        <button class="quick-reply" onclick="sendQuickReply('I want to book an appointment')">Book Appointment</button>
        <button class="quick-reply" onclick="sendQuickReply('What are your services?')">Services</button>
        <button class="quick-reply" onclick="sendQuickReply('Help')">Help</button>
      </div>

      <div class="chat-input-container">
        <form id="chat-form">
          <input
            type="text"
            id="chat-input"
            name="message"
            placeholder="Type your message..."
            required
          />
          <button class="primary-button" type="submit">Send</button>
        </form>
      </div>
      

    </div>
  </div>

  <script src="/script.js"></script>
</body>
</html>
