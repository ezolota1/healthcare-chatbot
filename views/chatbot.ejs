<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="stylesheet" href="/style.css">
  <title>Healthcare Chatbot</title>
</head>
<body>
  <div class="container"> 
    <!-- Left Panel: User Info and Appointments -->
    <div class="left-panel">

      <div class="appointments-section">
        <h2>Booked Appointments</h2>
        <div class="appointment-filters">
          <button class="filter-button" onclick="filterAppointments('upcoming')">Upcoming</button>
          <button class="filter-button" onclick="filterAppointments('past')">Past</button>
          <button class="filter-button" onclick="filterAppointments('all')">All</button>
        </div>
        <ul class="appointments-list" id="appointments-list">
          <% if (appointments.length > 0) { %>
            <% appointments.forEach(appointment => { %>
              <li class="appointment-item <%= appointment.type %>">
                <strong>Doctor:</strong> <%= appointment.doctor %><br>
                <strong>Date:</strong> <%= appointment.date %><br>
                <strong>Time:</strong> <%= appointment.time %><br>
                <strong>Status:</strong> <%= appointment.status %>
              </li>
            <% }); %>
          <% } else { %>
            <p>No appointments booked yet.</p>
          <% } %>
        </ul>
      </div>

      <div class="user-info">
        <h2>User Info</h2>
        <p><strong>Name:</strong> <%= user.firstName + ' ' + user.lastName %></p>
        <p><strong>Email:</strong> <%= user.email %></p>
        <div class="buttons-container">
          <form action="/edit-profile" method="GET" class="logout-form">
            <button id="edit-profile" class="primary-button">Edit Profile</button>
          </form>
          <form action="/logout" method="POST" class="logout-form">
            <button class="secondary-button">Logout</button>
          </form>
        </div>
      </div>
    </div>

    <!-- Right Panel: Chat Interface -->
    <div class="right-panel">
      <header class="chat-header">
        <h2>Healthcare Chatbot</h2>
      </header>

      <div class="chat-output" id="chat-output">
        <% chatMessages.forEach(message => { %>
          <div class="chat-message <%= message.sender %>">
            <%= message.text %>
          </div>
        <% }); %>
        <!-- Book Appointment Form (Initially Hidden) -->
      <div id="appointment-form" class="appointment-form" style="display: none;">
        <h3>Book an Appointment</h3>
        <form action="/appointment/create" method="POST">
          <div class="form-row">
            <div class="form-column">
              <label for="first-name">First name:</label>
              <input type="text" id="first-name" name="firstName" required>
            </div>
            <div class="form-column">
              <label for="last-name">Last name:</label>
              <input type="text" id="last-name" name="lastName" required>
            </div>
          </div>

          <div class="form-row">
            <div class="form-column">
              <label for="unique-id">Unique personal identification number:</label>
              <input type="text" id="unique-id" name="uniqueId" required>
            </div>
            <div class="form-column">
              <label for="specialization">Select specialization:</label>
              <select id="specialization" name="specialization" required>
                <% specializations.forEach(specialization => { %>
                  <option value="<%= specialization %>"><%= specialization %></option>
                <% }); %>
              </select>
            </div>
          </div>

          <div class="form-row">
            <div class="form-column">
              <label for="appointment-date">Select date:</label>
              <input type="date" id="appointment-date" name="date" required>
            </div>
            <div class="form-column">
              <label for="appointment-time">Select time:</label>
              <input type="time" id="appointment-time" name="time" required>
            </div>
          </div>

          <div class="form-row">
            <div class="form-column">
              <label for="description">Description of medical issue:</label>
              <input type="text" id="description" name="description" required>
            </div>
          </div>

          <button class="primary-button" type="submit">Submit Request</button>
        </form>
      </div>
      </div>

      

      <!-- <div class="chat-quick-replies">
        <button class="quick-reply" onclick="sendQuickReply('I want to book an appointment')">Book Appointment</button>
        <button class="quick-reply" onclick="sendQuickReply('What are your services?')">Services</button>
        <button class="quick-reply" onclick="sendQuickReply('Help')">Help</button>
      </div> -->

      <div class="chat-input-container">
        <form id="chat-form">
          <input
            type="text"
            id="chat-input"
            name="message"
            placeholder="Type your message..."
            required
          />
          <button class="primary-button" type="submit">Send</button>
        </form>
      </div>

    </div>
  </div>

  <script src="/script.js"></script>
</body>
</html>
